#!/bin/bash

TARGETDIR="/opt/crashplan"
PATH="$PATH:/opt/java/bin"
CLASSPATH="${TARGETDIR}/lib/com.backup42.desktop.jar:${TARGETDIR}/lang:${TARGETDIR}/skin"

source "${TARGETDIR}/bin/run.conf"

cd "${TARGETDIR}"
exec env DISPLAY=:0 SWT_GTK3=0 \
    java \
    -Dfile.encoding=UTF-8 \
    -Dapp=CrashPlanDesktop \
    -DappBaseName=CrashPlan \
    -Xms20m \
    -Xmx512m \
    -Dsun.net.inetaddr.ttl=300 \
    -Dnetworkaddress.cache.ttl=300 \
    -Dsun.net.inetaddr.negative.ttl=0 \
    -Dnetworkaddress.cache.negative.ttl=0 \
    -Dc42.native.md5.enabled=false \
    -classpath "$CLASSPATH" \
    com.backup42.desktop.CPDesktop
